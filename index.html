<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sample Chat- Bold360</title>
</head>
<body>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
        (function showWidget() {
            (function() {
                window._bcvma = window._bcvma || [];
                _bcvma.push(["setAccountID", "794130127792834009"]);
                _bcvma.push(["setParameter", "WebsiteID", "788119547699982764"]);
                _bcvma.push(["setParameter", "InvitationID", "788119547909269704"]);
                _bcvma.push(["setParameter", "VisitName", "test"]);
                // _bcvma.push(["setParameter", "VisitPhone", ""]);
                _bcvma.push(["setParameter", "VisitEmail", "test@cleartrip.com"]);
                // _bcvma.push(["setParameter", "VisitRef", ""]);
                // _bcvma.push(["setParameter", "VisitInfo", ""]);
                // _bcvma.push(["setParameter", "Data", "({\"custom_trip_id\": \"1234567890\", \"name\": \"test test\", \"email\": \"test.test@cleartrip.com\"}"]);
                _bcvma.push(["setParameter", "CustomUrl", ""]);
                _bcvma.push(["setParameter", "WindowParameters", ""]);
                _bcvma.push(["pageViewed", document.location.href, document.referrer]);
                var bcLoad = function() {
                    if(window.bcLoaded) return;
                    window.bcLoaded = true;
                    var vms = document.createElement("script");
                    vms.type = "text/javascript"; vms.async = true;
                    vms.src = ('https:'==document.location.protocol?'https://':'http://') + "vmss.boldchat.com/aid/794130127792834009/bc.vms4/vms.js";
                    var s = document.getElementsByTagName('script')[0];
                    s.parentNode.insertBefore(vms, s);
                };
                if(window.pageViewer && pageViewer.load) pageViewer.load();
                else if(document.readyState=="complete") bcLoad();
                else if(window.addEventListener) window.addEventListener('load', bcLoad, false);
                else window.attachEvent('onload', bcLoad);
            })();

            if(window.bcChatWindows) {
                if(window.bcChatWindows.length) {
                    $('.bc-minimize-state-container').trigger('click');
                }
                else{
                    $('.bcFloat a').trigger('click');
                }
            }
            else {
                function startChatInterval() {
                    if($('.bcFloat a').length) {
                        $('.bcFloat a').trigger('click');
                        clearChatInterval();
                    }
                }
                function clearChatInterval() {
                    clearInterval(chatOpenInterval);
                }
                var chatOpenInterval = setInterval(startChatInterval, 500);
            }

            // var url = 'https://api.boldchat.com/aid/794130127792834009/rest/json/v1/createChat';

            // $.ajax({
            //     "async": true,
            //     "crossDomain": true,
            //     "url": url,
            //     "type": "POST",
            //     "contentType": "application/x-www-form-urlencoded",
            //     "headers": {
            //         "authorization": 'Basic ' + btoa('794130127792834009:788126291309184179:Q27PqEuCUCaxOnwJoZein2+N4OVZR+tT')
            //     },
            //     "data": {
            //         Data: JSON.stringify({
            //             "custom_trip_id": "1234567890",
            //             "name": "test test",
            //             "email": "test.test@cleartrip.com"
            //         }),
            //         SkipPreChat: true
            //     } 
            // }).done(function (response) {
            //     console.log(response);
            // });
        })();
    </script>
</body>
</html>